<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>计算机网络 | wawa 的前端学习记录</title><meta name="description" content="计算机网络">
    <link rel="modulepreload" href="/assets/app.0e0bd4df.js"><link rel="modulepreload" href="/assets/index.html.bf852584.js"><link rel="modulepreload" href="/assets/index.html.50e8691e.js"><link rel="prefetch" href="/assets/index.html.38464c82.js"><link rel="prefetch" href="/assets/index.html.096fbd55.js"><link rel="prefetch" href="/assets/javaChapter8.html.9f92bc72.js"><link rel="prefetch" href="/assets/xml.html.0ea76bdd.js"><link rel="prefetch" href="/assets/index.html.df24929e.js"><link rel="prefetch" href="/assets/index.html.d29a6cc6.js"><link rel="prefetch" href="/assets/index.html.1563b54c.js"><link rel="prefetch" href="/assets/index.html.a964ae08.js"><link rel="prefetch" href="/assets/index.html.95ad66b2.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.fc923d22.js"><link rel="prefetch" href="/assets/index.html.d9540bce.js"><link rel="prefetch" href="/assets/javaChapter8.html.60e12422.js"><link rel="prefetch" href="/assets/xml.html.a4a5bbb0.js"><link rel="prefetch" href="/assets/index.html.f1ea03c2.js"><link rel="prefetch" href="/assets/index.html.8f0d3452.js"><link rel="prefetch" href="/assets/index.html.eae1cad3.js"><link rel="prefetch" href="/assets/index.html.4b73f45c.js"><link rel="prefetch" href="/assets/index.html.7a7c571c.js"><link rel="prefetch" href="/assets/404.html.a3474ba1.js"><link rel="prefetch" href="/assets/404.0198f420.js"><link rel="prefetch" href="/assets/Layout.57d8c940.js">
    <link rel="stylesheet" href="/assets/style.acf36ec1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/ldjj.jpg" alt="wawa 的前端学习记录"><span class="site-name can-hide">wawa 的前端学习记录</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">计算机网络 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/internet/#_1-集线器、网桥、交换机" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 集线器、网桥、交换机"><!--[--><!--]--> 1. 集线器、网桥、交换机 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/internet/#_1-1-集线器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 集线器"><!--[--><!--]--> 1.1 集线器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/internet/#_1-2-网桥" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 网桥"><!--[--><!--]--> 1.2 网桥 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/internet/#_1-3-交换机" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3 交换机"><!--[--><!--]--> 1.3 交换机 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/internet/#_1-4-路由器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.4 路由器"><!--[--><!--]--> 1.4 路由器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/internet/#_1-5-ip-和-mac-地址" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5 ip 和 mac 地址"><!--[--><!--]--> 1.5 ip 和 mac 地址 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="_1-集线器、网桥、交换机" tabindex="-1"><a class="header-anchor" href="#_1-集线器、网桥、交换机" aria-hidden="true">#</a> 1. 集线器、网桥、交换机</h2><p>计算机之间通信，除了知道 ip 地址之外,还需要知道 mac 地址。 如 ping 命令，如果之前两台电脑没有进行 ping 过，是没有记录对方的 mac 地址。 需要使用到 arp 协议，arp 协议通过广播的形式进行，如 p1、p2、p3，p1 首次 ping p2，p1 会通过 arp 协议广播出去，p2、p3 都会收到。 arp 中带有源 ip、目标 ip、源 mac 地址，目标 mac 地址，p3 得到这个广播后，发现目标 ip 不是自己，就会将这个 arp 的包丢弃；p2 同样会得到一个 arp 包，发现目标 ip 是自己，会回复一个 arp 包将自己的 mac 地址携带在内，p1 得到这个 arp 回复的包后将 p3 的 mac 地址进行保存。</p><blockquote><p>通过 <code>arp -a</code> 获取 将目标 mac 地址换为 <code>FFFF.FFFF.FFFF.FFFF</code> 表示是一个广播地址，这个地址所有的设备都可以接受到。</p></blockquote><h3 id="_1-1-集线器" tabindex="-1"><a class="header-anchor" href="#_1-1-集线器" aria-hidden="true">#</a> 1.1 集线器</h3><p>集线器需要链接到<em>同一个</em>网段。 将多台电脑设备进行链接，相比于同轴电缆，如果和某一台电脑的链接出现故障后整体不受影响。 但是如，不会缓存通过 arp 找到的 mac 地址，所以下一次通过 arp 协议找 mac 地址时，会广播出去，集线器不会自己缓存。 即使得到目标的 mac 地址后，通过 ping 命令（ICMP）经过集线器还是会将这个 ping 命令广播出去。</p><h3 id="_1-2-网桥" tabindex="-1"><a class="header-anchor" href="#_1-2-网桥" aria-hidden="true">#</a> 1.2 网桥</h3><p>集线器的问题是，如果集线器链接的设备特别多的时候，通过广播的形式会占用大量资源。即使知道对方的 mac 地址还是需要广播的形式。 如果多个集线器链接到同一台网桥上，后面查询 mac 地址的信息会被网桥记录下来。后续比如网桥接口 1 链接了集线器 1，这台集线器下链接了多台电脑；网桥接口 2 链接了集线器 2，这台集线器下也链接了多台集线器。如果在集线器 1 下的电脑 1 查询也是在集线器 1 下的电脑 2，那么会通过集线器进行广播，当广播到网桥时，并且网桥也缓存了目标电脑的 mac 地址，发现这台 mac 地址时在网桥接口 1 下的，这时网桥就不会将查询信息发送的集线器 2. 如果没有网桥，并且集线器 1 和集线器 2 进行链接，那么查询 mac 地址的信息会通过集线器 1 进行广播，集线器 2 收到这个广播信息后，又开始进行广播。但是目标 mac 地址的电脑只位于集线器 1 下，集线器 2 的广播操作就多余了。</p><ul><li>网桥会缓存接口下的设备的 mac 地址。</li><li>隔离冲突域，网桥连接下的多个集线器，多个集线器下有多台电脑，属于不同集线器的电脑通信可以通过网桥进行隔离。</li></ul><h3 id="_1-3-交换机" tabindex="-1"><a class="header-anchor" href="#_1-3-交换机" aria-hidden="true">#</a> 1.3 交换机</h3><p>网桥在同一个冲突域中，不能实现同时发生数据。 交换机可以全双工通信。多台电脑链接到交换机后，电脑之间可以互发信息。 接口多，可以记录不同接口下的所有设备 mac 地址信息。 比集线器安全，发送数据包后不会将一些私密的数据包再广播出去。</p><h3 id="_1-4-路由器" tabindex="-1"><a class="header-anchor" href="#_1-4-路由器" aria-hidden="true">#</a> 1.4 路由器</h3><p>连接不同的网段。</p><p>不同网段之间，发送数据会判断目标 ip 是否再当前网段下。如果在相同网段下，可以发送 arp 寻找 mac 地址；如果不是同一个网段，需要设置网关。</p><p><strong>网关</strong> 如果跨网关发送数据，需要利用到路由器的网关。需要将路由器端口 ip 配置为连接的网段下。配置完路由器端口的 ip 后，对应端口下的设备需要配置网关地址为这个端口的 ip 地址。</p><ul><li>注意： 第一次跨网段发送时，会发送一个 arp 去查路由器的的 mac 地址。</li><li>如果两台设备属于同一个网段，但是中间通过路由器进行连接。发送数据行不通，因为发送时会判断是否目标 ip 是否时属于同一个网段下，如果是同一个网段下会直接发送 arp 协议，不会通过路由器进行。</li></ul><h3 id="_1-5-ip-和-mac-地址" tabindex="-1"><a class="header-anchor" href="#_1-5-ip-和-mac-地址" aria-hidden="true">#</a> 1.5 ip 和 mac 地址</h3><p>mac 地址属于全球唯一，写死在网卡的 rom 中。全长 6 个字节，前面三个字节表示组织唯一标识 OUI（表示生产厂家是谁）；后三个字节由生产厂家生成，叫网络接口标识符。</p><ul><li>查询 oui https://standards-oui.ieee.org/oui/oui.txt。 <strong>ip 地址</strong>，</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.0e0bd4df.js" defer></script>
  </body>
</html>
